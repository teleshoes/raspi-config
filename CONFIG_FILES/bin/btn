#!/usr/bin/env python
import os, sys

buttons = {
  'prev'   : lambda: os.system("klomp-cmd prev"),
  'next'   : lambda: os.system("klomp-cmd next"),
  'pause'  : lambda: os.system("klomp-cmd pause"),

  'red'    : lambda: os.system("klomp-cmd prev"),
  'green'  : lambda: os.system("klomp-cmd next"),
  'blue'   : lambda: os.system("speaker xbmc"),
  'yellow' : lambda: os.system("speaker klomp")
}

usage = """Usage: %s %s""" % (sys.argv[0], '|'.join(buttons.keys()))

def main():
  if len(sys.argv) != 2 or sys.argv[1] not in buttons:
    print >> sys.stderr, usage
    return 1
  btn = sys.argv[1]
  f = buttons[btn]
  os.system("echo new: $(date) " + btn + " >> /tmp/btnlog")

  f()

if __name__ == "__main__":
  sys.exit(main())
